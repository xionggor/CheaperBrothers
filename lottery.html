<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>Cheaper Brothers 2025 第一届形容词动词交换礼物 🎅🎄</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>
  <!-- 圣诞彩灯 -->
  <div id="christmas-lights">
    <div class="light red"></div>
    <div class="light green"></div>
    <div class="light yellow"></div>
    <div class="light blue"></div>
    <div class="light pink"></div>
    <div class="light red"></div>
    <div class="light green"></div>
    <div class="light yellow"></div>
  </div>

  <header>
    <h1>Cheaper Brothers 2025 第一届形容词动词交换礼物 🎅🎄</h1>
    <p>每个人贡献 2 个形容词 + 2 个动词，看看命运会给你什么惊喜吧 😂</p>
  </header>

  <main>
    <section id="form-section" class="card">
      <h2>报名表</h2>
      <form id="giftForm" autocomplete="off">
        <label>名字:</label>
        <input type="text" id="name" required>

        <label>动词1:</label>
        <input type="text" id="verb1" required>
        <div class="example" id="verb1-example"></div>

        <label>动词2:</label>
        <input type="text" id="verb2" required>
        <div class="example" id="verb2-example"></div>

        <label>形容词1:</label>
        <input type="text" id="adverb1" required>
        <div class="example" id="adverb1-example"></div>

        <label>形容词2:</label>
        <input type="text" id="adverb2" required>
        <div class="example" id="adverb2-example"></div>

        <label>备注:</label>
        <input type="text" id="remark">

        <button type="submit">提交</button>
      </form>

      <div id="submissionList">
        <h3>已提交信息</h3>
      </div>
    </section>

    <section id="admin-section" class="card">
      <h2>主持人操作</h2>
      <label>密码:</label>
      <input type="password" id="adminPassword">
      <button id="loginBtn">登录</button>
      <div id="admin-controls" style="display:none; margin-top:10px;">
        <button id="generateBtn">生成组合（每人一组）</button>
        <button id="matchBtn">匹配名字（随机送礼）</button>
        <button id="clearBtn">清空结果</button>
      </div>
    </section>

    <section id="results-section" class="card" style="display:flex; gap:20px;">
      <div style="flex:1;">
        <h3>生成组合结果</h3>
        <ul id="comboList"></ul>
      </div>
      <div style="flex:1;">
        <h3>随机送礼结果</h3>
        <ul id="giftList"></ul>
      </div>
    </section>
  </main>

  <footer>
    <a href="index.html">Cheaper Brothers 🎄 2025</a>
  </footer>

  <!-- 主 JS -->
  <script src="script.js"></script>

  <!-- 彩灯闪烁 -->
  <script>
    const lights = document.querySelectorAll('#christmas-lights .light');
    function randomBlink() {
      lights.forEach(light => {
        const delay = Math.random() * 2000;
        setTimeout(() => {
          light.style.opacity = Math.random() > 0.5 ? 1 : 0.3;
        }, delay);
      });
    }
    setInterval(randomBlink, 500);
  </script>

  <script>
    // 保存结果到本地
    function saveResults() {
      const comboData = Array.from(document.querySelectorAll("#comboList li")).map(li=>li.innerText);
      const giftData = Array.from(document.querySelectorAll("#giftList li")).map(li=>li.innerText);
      localStorage.setItem("comboResults", JSON.stringify(comboData));
      localStorage.setItem("giftResults", JSON.stringify(giftData));
    }

    function loadResults() {
      const comboData = JSON.parse(localStorage.getItem("comboResults")||"[]");
      const giftData = JSON.parse(localStorage.getItem("giftResults")||"[]");
      const comboList = document.getElementById("comboList");
      const giftList = document.getElementById("giftList");
      comboList.innerHTML="";
      giftList.innerHTML="";
      comboData.forEach(item=>{
        const li=document.createElement("li");
        li.innerText=item;
        comboList.appendChild(li);
      });
      giftData.forEach(item=>{
        const li=document.createElement("li");
        li.innerText=item;
        giftList.appendChild(li);
      });
    }

    // 页面加载时恢复结果
    window.onload = ()=> {
      loadResults();
      loadSubmissions();
    }

    // 清空按钮
    document.getElementById("clearBtn").addEventListener("click",()=>{
      document.getElementById("comboList").innerHTML="";
      document.getElementById("giftList").innerHTML="";
      localStorage.removeItem("comboResults");
      localStorage.removeItem("giftResults");
    });

    // 修改显示结果函数，自动保存
    function displayResults(list, title, isGift=false){
      const ul = isGift ? document.getElementById("giftList") : document.getElementById("comboList");
      ul.innerHTML="";
      list.forEach(c=>{
        const li=document.createElement('li');
        li.innerText=isGift?`${c.sender} 🎁 送给 → ${c.receiver}`:`${c.name} → ${c.combo}`;
        ul.appendChild(li);
      });
      saveResults();
    }
  </script>
</body>
</html>
